{"retrieved_on":1473808288,"distinguished":null,"gilded":0,"edited":false,"id":"cuf53","parent_id":"t1_cubmm","author":"jbert","author_flair_text":null,"created_utc":1165836285,"author_flair_css_class":null,"score":1,"ups":1,"subreddit":"programming","stickied":false,"link_id":"t3_u983","subreddit_id":"t5_2fwo","body":"The proposal is that if you have a big enough chunk in your free-list, you can tell the OS that this data may be discarded without saving it to swap. Even if your allocation data is in-line, as long as you have gaps of greater than page granularity you can do this.\r\n\r\nYou don't really want to munmap() the middle of your heap, because you'll have to mmap it back in when you want to allocate there. madvise allows you to get the benefits (the OS will just discard those pages if there is memory pressure) without the downside (the OS will make sure clean+empty pages are there for you if your fault against them). In a way it is like a munmap() without the need for an explicit anon map in the future.","controversiality":0,"timestamp_epoch":1566236766,"message_id":"22033-508aa174-1c95-4732-a42a-1d755770f8c5-1566236766"}